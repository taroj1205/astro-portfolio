---
import { SEOMetadata } from "astro-seo-metadata"
import SectionDivider from "../components/divider/section-divider.astro"
import Footer from "../components/footer/index.astro"
import Header from "../components/header/index.astro"
import { getLangFromUrl, getTranslations } from "../i18n/utils"

interface Props {
  title: string
  description: string
}

const { title, description } = Astro.props
const lang = getLangFromUrl(Astro.url)
const { metadata } = getTranslations(lang)
const url = Astro.site
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="theme-color" content="#005A9C" />
    <SEOMetadata
      siteName={metadata.title}
      title={metadata.title}
      description={metadata.description}
      image={url + "header/opengraph-image.png"}
      favicon={url + "favicon.ico"}
      author="Shintaro Jokagi"
      astroSitemap={true}
      canonicalUrl={String(url)}
      type="website"
      astroGenerator={true}
    />
    <title>{title}</title>
  </head>
  <body>
    <Header lang={lang} />
    <main><slot /></main>
    <div class="footer">
      <SectionDivider />
      <Footer lang={lang} />
    </div>
    <style is:global>
      :root {
        --spaces-1: 0.25rem;
        --spaces-2: 0.5rem;
        --spaces-4: 1rem;
        --overlay-z-index: 99;
        --rounded-md: 0.375rem;
        --rounded-lg: 0.5rem;

        --text-4xl: 2.25rem;
        --text-5xl: 3rem;
        --text-3xl: 1.75rem;
        --text-2xl: 1.5rem;
        --fontSizes-2xs: 0.625rem;
        --fontSizes-xs: 0.75rem;
        --fontSizes-sm: 0.875rem;
        --fontSizes-md: 1rem;
        --fontSizes-lg: 1.125rem;
        --fontSizes-xl: 1.25rem;
        --fontSizes-2xl: 1.5rem;
        --fontSizes-3xl: 1.875rem;
        --fontSizes-4xl: 2rem;
        --fontSizes-5xl: 2.25rem;
        --fontSizes-6xl: 3rem;
        --fontSizes-7xl: 3.75rem;
        --fontSizes-8xl: 4.5rem;
        --fontSizes-9xl: 6rem;

        --chat-app-link-color: hsl(90, 90%, 30%);
        --connect4-link-color: hsl(180, 90%, 30%);
        --typing-game-link-color: hsl(270, 90%, 30%);
        --search-app-link-color: hsl(60, 90%, 30%);
        --uoa-links-link-color: hsl(300, 90%, 30%);
        --analytics-link-color: hsl(0, 90%, 30%);

        --background-white: hsl(210, 33%, 98%);
        --background-black: hsl(0, 0%, 8%);
        --black-color: hsl(210, 33%, 98%);

        --link-color: hsl(212, 100%, 40%);
        --accent-color: hsl(16, 100%, 40%);
        --text-color: hsl(0, 0%, 8%);
        --text-white: hsl(0, 0%, 98%);
        --h2-color: hsl(0, 0%, 5%);
        --h3-color: hsl(0, 0%, 6%);
        --h4-color: hsl(0, 0%, 7%);
        --gray-color: hsl(0, 0%, 20%);
        --button-hover-background: hsl(300, 8.17%, 88.04%);
        --overlay-background-color: rgba(255, 255, 255, 0.9);
        --overlay-button-background-color: hsl(30, 100%, 98%);
        --overlay-button-hover-color: hsl(210, 50%, 80%);
        --overlay-button-text-color: hsl(210, 20%, 20%);
        --table-row-even-bg: hsl(210, 66%, 97%);
        --table-row-odd-bg: hsl(216, 33%, 94%);
        --table-head: hsl(180, 100%, 75%);
        --card-bg: hsl(210, 25%, 95%);
        --card-border: hsl(0, 0%, 80%);
        --card-footer-bg: hsl(210, 20%, 94%);
        --line-color: hsl(0, 3%, 87%);
        --label-bg: hsla(209, 95%, 58%, 0.9);
        --mobile-content-bg: hsla(0, 0%, 100%, 0.5);
        --mobile-toggle-bg: hsl(210, 33%, 98%);

        --section-divider: hsl(220, 8%, 75%);
        --content-divider: hsl(213, 9%, 46%);
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --background-white: hsl(0, 0%, 8%);
          --background-black: hsl(0, 0%, 92%);
          --black-color: hsl(200, 13%, 5%);

          --link-color: hsl(212, 100%, 60%);
          --accent-color: hsl(16, 100%, 60%);
          --text-color: hsl(0, 0%, 98%);
          --text-white: hsl(0, 0%, 8%);
          --h2-color: hsl(0, 0%, 95%);
          --h3-color: hsl(0, 0%, 94%);
          --h4-color: hsl(0, 0%, 93%);
          --gray-color: hsl(0, 0%, 60%);
          --button-hover-background: hsl(0, 0%, 20%);
          --overlay-background-color: hsla(0, 0%, 0%, 0.9);
          --overlay-button-background-color: hsl(0, 0%, 8%);
          --overlay-button-hover-color: hsl(210, 25%, 45%);
          --overlay-button-text-color: hsl(0, 0%, 98%);
          --table-row-even-bg: hsl(210, 30%, 15%);
          --table-row-odd-bg: hsl(216, 25%, 20%);
          --table-head: hsl(180, 100%, 20%);
          --card-bg: hsl(0, 0%, 8%);
          --card-border: hsl(0, 0%, 28%);
          --card-footer-bg: hsl(0, 0%, 10%);
          --line-color: hsl(0, 0%, 25%);
          --label-bg: hsla(209, 100%, 31%, 0.9);
          --mobile-content-bg: rgba(31, 31, 31, 0.5);
          --mobile-toggle-bg: hsl(0, 0%, 81%);

          --section-divider: hsl(220, 8%, 30%);
          --content-divider: hsl(213, 9%, 26%);
        }
      }

      .blur {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      html {
        scroll-behavior: smooth;
        box-sizing: border-box;
        color: var(--text-color);
      }

      *,
      *:before,
      *:after {
        box-sizing: inherit;
      }

      @media (prefers-reduced-motion: reduce) {
        html {
          scroll-behavior: auto;
        }
        * {
          transition: none !important;
          animation: none !important;
        }
      }

      body {
        color: var(--text-color);
        background-color: var(--background-white);
        font-family: "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans";
        margin: 0;
        min-height: 100svh;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        text-wrap: balance;
        word-wrap: break-word;
        vertical-align: middle;
        container-type: inline-size;
      }

      body::has(#close-drawer:checked) {
        overflow: hidden;
      }

      @keyframes card-in {
        from {
          opacity: 0;
          transform: translateY(100%);
          height: 0;
          width: 0;
          border: none;
          margin-bottom: 0;
          position: absolute;
          display: none;
        }
        to {
          opacity: 1;
          transform: translateY(0);
          height: auto;
          width: 100%;
          border: 1px solid var(--card-border);
          margin-bottom: var(--spaces-4);
          position: relative;
          display: flex;
        }
      }

      @keyframes card-out {
        from {
          opacity: 1;
          transform: translateY(0);
          height: auto;
          width: 100%;
          border: 1px solid var(--card-border);
          margin-bottom: var(--spaces-4);
          position: relative;
          display: flex;
        }
        to {
          opacity: 0;
          transform: translateY(100%);
          height: 0;
          width: 0;
          border: none;
          margin-bottom: 0;
          position: absolute;
          display: none;
        }
      }

      main {
        max-width: min(64rem, 100%);
        margin-inline: auto;
        padding: var(--spaces-4) var(--spaces-4);
        z-index: 0;
        gap: var(--spaces-4);
        display: flex;
        flex-direction: column;
        overflow-y: clip;
      }

      section {
        margin-left: var(--spaces-2);
      }

      .vstack {
        display: flex;
        flex-direction: column;
      }

      .disc-list {
        list-style-type: disc;
        padding-left: 20px;
        gap: var(--spaces-2);
        display: flex;
        flex-direction: column;
      }

      p,
      li,
      strong {
        font-size: var(--fontSizes-lg);
      }

      p,
      ul {
        margin: var(--spaces-2) 0;
      }

      h1,
      h2,
      h3,
      h4 {
        margin: var(--spaces-2) 0;
      }

      h2 {
        font-size: var(--text-4xl);
      }

      h3 {
        font-size: var(--text-3xl);
      }

      h4 {
        font-size: var(--text-2xl);
      }
    </style>
  </body>
</html>
